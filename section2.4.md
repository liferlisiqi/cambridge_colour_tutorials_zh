## Dynamic range in digital photography

[原文连接](https://www.cambridgeincolour.com/tutorials/dynamic-range.htm)  

摄影中的动态范围描述了最大和最小可测光强度之间的比率（分别为白色和黑色）。在现实世界中，人们永远不会遇到真正的白色或黑色,只有不同程度的光源强度和主体反射率。因此，动态范围的概念变得更加复杂，并且取决于捕获设备（例如相机或扫描仪），显示设备（例如打印或计算机显示器）还是主体本身。

![three_deivce](https://liferlisiqi.github.io/cambridge_colour_tutorials_zh/jpg/2.4_three_deivce.png)

与色彩管理一样，上述成像链中的每个设备都有自己的动态范围。在印刷品和计算机显示器中，没有任何东西可以分别比纸白或最大强度像素更亮。事实上，上面没有显示的另一个设备是我们的眼睛，它们也有自己的动态范围。因此，在设备之间翻译图像信息可能影响该图像的再现方式。因此，动态范围的概念对于实际场景，相机和屏幕上或最终打印中的图像之间的相对比较非常有用。

## Influence of light: illuminance & reflecivity

光强度可以用入射光和反射光来描述, 两者都有助于场景的动态范围。

![influence_light](https://liferlisiqi.github.io/cambridge_colour_tutorials_zh/jpg/2.4_influence_light.png)

具有高反射率变化的场景，例如包含强反射和黑色物体，实际上可能具有比入射光变化场景更大的动态范围。两种情况下都很容易超出相机的动态范围，特别是当曝光不是点曝光。

因此在评估动态范围时，准确测量光强度或亮度至关重要。这里我们使用术语照度(illuminance)来指入射光。照度(illuminance)和亮度(luminance)通常以坎德拉/平方米（cd / m 2）来测量，常见光源的近似值如下所示。

![illuminance](https://liferlisiqi.github.io/cambridge_colour_tutorials_zh/jpg/2.4_illuminance.png)

在这里，我们看到入射光可能存在巨大的变化，因为上图被缩放到十的幂。如果一个场景被直射和遮挡的阳光不均匀照射，仅此一点就可以大大增加场景的动态范围（从峡谷日落示例中可以看出，部分照明的悬崖面）。

## Digital cameras

虽然现实世界场景的动态范围含义仅仅是最亮和最暗区域之间的比率（对比度），但在描述数码相机和扫描仪等测量设备时，其定义会变得更加复杂。回想一下数码相机传感器的教程，在感光井中的每个像素处测量光（光点）。除了测量其内容之外，每个photosite的大小决定了数码相机的动态范围。

![photosite](https://liferlisiqi.github.io/cambridge_colour_tutorials_zh/jpg/2.4_photosite.png)

感光井可以被认为储存光子的桶，如果存得太满，它就会溢出。而溢出的感光井已经饱和，无法辨别其他入射光子，从而定义了相机的白色等级。对于理想的相机，其对比度将是每个感光井中可包含的光子数量除以最暗的可测量光强度。如果每个光子持有1000个光子，则对比度将为1000：1。由于较大的感光井可以包含更大范围的光子，因此与紧凑型相机相比，数码单反相机的动态范围通常更高（由于更大的像素尺寸）。

实际上，消费级相机无法统计单个光子。因此动态范围受到最暗色调的限制，在这种色调中无法再辨别出纹理，我们称之为黑色等级。黑色水平受到每个光点测量精度的限制，因此受到图像噪声的限制。对于较低的ISO速度和具有较小测量噪声的相机，动态范围通常会增加。

总的来说，数码相机的动态范围可以被描述为可测量的最大光强度（在像素饱和度处）与可测量的最小光强度（在读出的噪声之上）的比率。动态范围的最常用单位是f-stop，它以2的幂表示总光线范围。因此1024：1的对比度也可以描述为具有10f-stop的动态范围2^10=1024。每个单元f-stop也可以被描述为“区域”或“eV”，所以也说10个eV。

## Comparsion

动态范围变化很大，通常以对数表示，下面我们以三种测量（f-stops，密度和对比度）表示多个设备的最大可测量（或可再现）动态范围。

![comparison](https://liferlisiqi.github.io/cambridge_colour_tutorials_zh/jpg/2.4_comparison.png)

请注意，打印机可重现的动态范围、扫描仪和数码相机可测量的动态范围之间存在巨大差异。为了与场景中的真实动态范围进行比较，从大约3f-stop反射均匀的阴天，到具有12f-stop高度不均匀反射率的晴天。

在解释上述数字时需注意，真实世界的动态范围是印刷和显示设备的强大环境光功能。没有充足光线的打印件可能没有完整的动态范围，而显示设备需要接近完全黑暗才能充分发挥其潜力，特别是对于等离子显示器。最后，这些值只是粗略的近似值，实际值取决于设备的使用年限、型号生成、价格范围等。

请注意，显示设备的对比度通常被夸大了，因为没有制造商标准来进行规定。对比度超过500：1通常只是一个非常黑的黑点，而不是更亮的白点。因此，应同时关注对比度和亮度，即使是环境烛光也可以完全抵消高对比度（没有相应的更高亮度）。

## The human eye

人眼实际上可以感知到比相机更大的动态范围。如果我们考虑瞳孔打开和关闭以获得不同光线的情况，我们的眼睛可以看到近24个f-stop的范围。

另一方面，为了与单张照片（恒定光圈，快门和ISO）进行精确比较，我们只能考虑瞬时动态范围（我们的瞳孔开度不变）。这类似于观察场景中的一个区域，让我们的眼睛调整，而不是在任何其他地方寻找。对于这种情况，存在很多分歧，因为我们的眼睛的灵敏度和动态范围实际上取决于亮度和对比度。大多数估计在10-14个f-stop之间。

这些数字的问题在于眼睛适应能力很强，对于极暗的星空观察情况（我们的眼睛已调整为使用视杆细胞进行夜视），我们的眼睛能有甚至更高的瞬时动态范围。

## Bit depth & measuring dynamic range

即使数码相机可以捕获巨大的动态范围，但光信号转换为数字信号的精度也会限制可用的动态范围。将这些连续测量值转换为离散数值的器件称为ADC，ADC的精度可以用精度位来描述，类似于数字图像中的位深度。但是应该注意这些概念不能互换使用，ADC为数码相机的RAW文件格式创建值。

![bit_depth_dr](https://liferlisiqi.github.io/cambridge_colour_tutorials_zh/jpg/2.4_bit_depth_dr.png)

例如，10位色调精度可以转换为0-1023的亮度范围（2^10 = 1024），假设每个ADC位数与实际图像亮度成比例（意味着像素值的两倍表示亮度的两倍），10位精度只能编码1024：1的对比度。

大多数数码相机使用10至14位ADC，因此它们的理论最大动态范围为10-14档。然而这种高位深度仅有助于最小化图像分色，因为总动态范围通常受到噪声水平的限制。意味着高位深度图像并不一定包含更多颜色，如果数码相机具有高精度ADC，并不一定意味着它可以记录更大的动态范围。实际上，**动态范围可以被认为是阶梯的高度，而比特深度可以被认为是阶梯的数量**。实际上，数码相机的动态范围达不到ADC的理论最大值，通常是从相机中获得8-12个stop。

## Influence of image type & tonal curve

数字图像文件能否实际记录高端设备的全部动态范围？互联网上似乎有很多关于图像位深度与可记录动态范围的相关性的混淆。

首先需要区分可记录的动态范围和可显示的动态范围，即使是普通的8位JPEG图像文件也可以记录无限的动态范围：假设在RAW转换期间应用了正确的色调曲线，并且ADC具有要求的精度。问题在于这个动态范围的可用性，如果太少的位分布在太大的色调范围内，那么这可能导致图像分色。

另一方面，可显示的动态范围取决于图像文件隐含的伽马校正或色调曲线，或者由视频卡和显示设备使用。使用2.2的伽玛（PC的标准），理论上可以编码近18个f-stop的动态范围。同时这将遭受严重的后代化，当前唯一编码无限动态范围的解决方案是在Photoshop（或其他支持程序）中使用高动态范围（HDR）图像文件。

## reference
[dynamic range in digitial photography](https://www.cambridgeincolour.com/tutorials/dynamic-range.htm)  